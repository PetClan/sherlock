<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Sherlock for Shopify - 24/7 Store Protection | Catch App Conflicts Before They Cost You Sales</title>
    <meta name="title"
        content="Sherlock for Shopify - 24/7 Store Protection | Catch App Conflicts Before They Cost You Sales">
    <meta name="description"
        content="Stop guessing which app broke your store. Sherlock monitors your Shopify store 24/7 - catching conflicts, detecting leftover code, and rolling back theme damage instantly. Free 14-day trial.">
    <meta name="keywords"
        content="Shopify app diagnostic, Shopify troubleshooting, Shopify app conflicts, Shopify performance, Shopify theme issues, Shopify store problems, fix Shopify store">
    <meta name="author" content="Sherlock">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://codenamesherlock.com/install">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codenamesherlock.com/install">
    <meta property="og:title" content="Sherlock - 24/7 Protection for Your Shopify Store">
    <meta property="og:description"
        content="Stop guessing which app broke your store. Sherlock monitors your Shopify store 24/7, catching conflicts before they cost you sales. Free 14-day trial.">
    <meta property="og:image" content="https://codenamesherlock.com/static/images/sherlock-og.png">
    <meta property="og:site_name" content="Sherlock for Shopify">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://codenamesherlock.com/install">
    <meta property="twitter:title" content="Sherlock - 24/7 Protection for Your Shopify Store">
    <meta property="twitter:description"
        content="Stop guessing which app broke your store. Sherlock monitors your Shopify store 24/7, catching conflicts before they cost you sales. Free 14-day trial.">
    <meta property="twitter:image" content="https://codenamesherlock.com/static/images/sherlock-og.png">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/apple-touch-icon.png">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "SoftwareApplication",
            "name": "Sherlock for Shopify",
            "description": "24/7 store protection that catches app conflicts, theme damage, and performance issues before they cost you sales.",
            "url": "https://codenamesherlock.com",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "150"
        },
        "featureList": [
            "App conflict detection",
            "Theme code analysis",
            "Performance monitoring",
            "Risk assessment",
            "Actionable recommendations"
        ]
    }
    </script>

    <!-- FAQ Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How does Sherlock find problematic Shopify apps?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Sherlock scans your installed apps, analyzes theme code for conflicts, checks community reports from Reddit and other sources, and measures performance impact to identify which apps may be causing issues in your store."
                }
            },
            {
                "@type": "Question",
                "name": "Is Sherlock free to use?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, Sherlock offers a free tier that includes basic diagnostics and app scanning. Premium features are available for more comprehensive analysis."
                }
            },
            {
                "@type": "Question",
                "name": "Will Sherlock slow down my Shopify store?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No, Sherlock runs diagnostics on-demand and does not add any code to your storefront. It only analyzes your store when you initiate a scan."
                }
            }
        ]
    }
    </script>

    <style>
        /* Dashboard Preview Background */
        .dashboard-preview {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1f3c 0%, #2d3561 100%);
            filter: blur(1px);
            transform: scale(1.02);
            pointer-events: none;
            position: relative;
        }

        .preview-header {
            background: linear-gradient(135deg, #1a1f3c 0%, #0d1117 100%);
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .preview-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #d4af37;
            font-weight: 700;
            font-size: 18px;
        }

        .preview-header-actions {
            display: flex;
            gap: 12px;
        }

        .preview-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            border: none;
            cursor: default;
        }

        .preview-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e8e6e3;
        }

        .preview-btn-primary {
            background: linear-gradient(135deg, #d4af37 0%, #b8942e 100%);
            color: #1a1f3c;
        }

        .preview-main {
            padding: 32px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .preview-hero {
            text-align: center;
            padding: 40px 0;
        }

        .preview-hero-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .preview-hero h1 {
            color: #e8e6e3;
            font-size: 28px;
            margin-bottom: 8px;
        }

        .preview-hero h1 span {
            color: #d4af37;
        }

        .preview-hero p {
            color: #9ca3af;
            font-size: 14px;
        }

        .preview-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 24px;
        }

        .preview-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            padding: 20px;
        }

        .preview-card-label {
            color: #9ca3af;
            font-size: 12px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .preview-card-value {
            color: #e8e6e3;
            font-size: 28px;
            font-weight: 700;
        }

        .preview-card-value.green {
            color: #22c55e;
        }

        .preview-card-value.yellow {
            color: #eab308;
        }

        .preview-card-value.blue {
            color: #3b82f6;
        }

        .preview-protection {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            padding: 24px;
            margin-top: 24px;
        }

        .preview-protection-header {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #e8e6e3;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .preview-status {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(34, 197, 94, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .preview-status-icon {
            font-size: 32px;
        }

        .preview-status-text h3 {
            color: #22c55e;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .preview-status-text p {
            color: #9ca3af;
            font-size: 13px;
        }

        /* Overlay */
        .install-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .install-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
            padding: 32px;
            max-width: 480px;
            width: 100%;
            margin: 20px;
            text-align: center;
            position: relative;
            z-index: 1001;
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .install-logo {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .install-title {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 6px;
            color: #212b36;
        }

        .install-subtitle {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: #637381;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.5;
        }

        .install-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .install-input {
            padding: 14px 18px;
            font-size: 16px;
            border: 2px solid #dfe3e8;
            border-radius: 8px;
            transition: border-color 0.2s;
        }

        .install-input:focus {
            outline: none;
            border-color: #5c6ac4;
        }

        .install-btn {
            padding: 16px 24px;
            font-size: 16px;
            font-weight: 600;
            background: #5c6ac4;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .install-btn:hover {
            background: #4959bd;
        }

        .install-features {
            margin-top: 20px;
            text-align: left;
        }

        .install-features h3 {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #212b36;
            margin-bottom: 12px;
            text-align: center;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 8px;
        }

        .feature-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .feature-text {
            font-size: 14px;
            color: #212b36;
            line-height: 1.4;
        }

        .trust-badges {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .trust-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #637381;
        }

        .install-footer {
            margin-top: 16px;
            font-size: 13px;
            color: #637381;
        }

        .install-footer a {
            color: #5c6ac4;
            text-decoration: none;
        }

        .install-footer a:hover {
            text-decoration: underline;
        }

        /* Tablet */
        @media (max-width: 768px) {
            .preview-cards {
                grid-template-columns: repeat(2, 1fr);
            }

            .install-card {
                padding: 28px 24px;
                margin: 16px;
                max-width: 420px;
            }

            .install-logo img {
                width: 64px !important;
                height: 64px !important;
            }

            .install-title {
                font-size: 22px;
            }

            .install-subtitle {
                font-size: 14px;
                margin-bottom: 16px;
            }

            .install-features h3 {
                font-size: 11px;
            }

            .feature-text {
                font-size: 13px;
            }

            .trust-badges {
                gap: 16px;
            }

            .trust-badge {
                font-size: 12px;
            }
        }

        /* Mobile */
        @media (max-width: 480px) {
            .dashboard-preview {
                display: none;
            }

            .install-overlay {
                position: relative;
                background: linear-gradient(135deg, #1a1f3c 0%, #2d3561 100%);
                min-height: 100vh;
                padding: 16px;
            }

            .install-card {
                padding: 24px 20px;
                margin: 0;
                max-width: 100%;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            }

            .install-logo img {
                width: 56px !important;
                height: 56px !important;
            }

            .install-title {
                font-size: 20px;
            }

            .install-subtitle {
                font-size: 13px;
                margin-bottom: 14px;
            }

            .install-input {
                padding: 12px 14px;
                font-size: 14px;
            }

            .install-btn {
                padding: 14px 20px;
                font-size: 15px;
            }

            .install-btn span {
                width: 30px !important;
                height: 30px !important;
                font-size: 1.2em !important;
            }

            .install-features {
                margin-top: 16px;
            }

            .install-features h3 {
                font-size: 10px;
                margin-bottom: 10px;
            }

            .feature-item {
                gap: 8px;
                margin-bottom: 6px;
            }

            .feature-icon {
                font-size: 16px;
            }

            .feature-text {
                font-size: 12px;
                line-height: 1.3;
            }

            .trust-badges {
                margin-top: 14px;
                padding-top: 14px;
                gap: 12px;
            }

            .trust-badge {
                font-size: 11px;
            }

            .install-footer {
                margin-top: 14px;
                font-size: 12px;
            }
        }

        /* Large Desktop */
        @media (min-width: 1200px) {
            .install-card {
                max-width: 500px;
                padding: 36px;
            }
        }
    </style>
</head>

<body>
    <!-- Dashboard Preview Backgrounds -->
    <div class="dashboard-preview">
        <div class="preview-header">
            <div class="preview-logo">
                <span>üîç</span>
                <span>SHERLOCK</span>
            </div>
            <div class="preview-header-actions">
                <button class="preview-btn preview-btn-secondary">‚ùì FAQ</button>
                <button class="preview-btn preview-btn-secondary">üîé Investigate App</button>
                <button class="preview-btn preview-btn-primary">üîç Run Full Scan</button>
            </div>
        </div>
        <div class="preview-main">
            <div class="preview-hero">
                <div class="preview-hero-icon">üîç</div>
                <h1>Your Store is Under <span>Protection</span></h1>
                <p>Sherlock monitors your store 24/7 ‚Äî detecting app conflicts, uncovering hidden issues, and
                    watching for suspicious changes.</p>
            </div>

            <div class="preview-cards">
                <div class="preview-card">
                    <div class="preview-card-label">Apps Installed</div>
                    <div class="preview-card-value">12</div>
                </div>
                <div class="preview-card">
                    <div class="preview-card-label">Risk Score</div>
                    <div class="preview-card-value green">Low</div>
                </div>
                <div class="preview-card">
                    <div class="preview-card-label">Theme Files</div>
                    <div class="preview-card-value blue">47</div>
                </div>
                <div class="preview-card">
                    <div class="preview-card-label">Issues Found</div>
                    <div class="preview-card-value yellow">3</div>
                </div>
            </div>

            <div class="preview-protection">
                <div class="preview-protection-header">
                    <span>üõ°Ô∏è</span>
                    <span>Store Protection Status</span>
                </div>
                <div class="preview-status">
                    <div class="preview-status-icon">‚úÖ</div>
                    <div class="preview-status-text">
                        <h3>All Systems Normal</h3>
                        <p>Last scan: 2 hours ago ‚Ä¢ Next scan scheduled in 22 hours</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Install Overlay -->
    <div class="install-overlay">
        <div class="install-card">
            <div class="install-logo">
                <img src="/static/images/sherlock-logo.png" alt="Sherlock"
                    style="width: 80px; height: 80px; border-radius: 16px;">
            </div>
            <h1 class="install-title">Sherlock</h1>
            <p class="install-subtitle">Let Sherlock handle the detective work.<br>While you focus on growing your store.</p>

            <!-- Redirecting message shown when shop parameter is present -->
            <div id="install-with-shop" style="display: none;">
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">üîê</div>
                    <p style="color: #212b36; font-size: 18px; margin-bottom: 8px; font-weight: 600;">
                        Redirecting to Shopify...
                    </p>
                    <p style="color: #637381; font-size: 14px;">
                        You'll be asked to authorize Sherlock to protect your store.
                    </p>
                </div>
            </div>
            
            <!-- Instructions shown when no shop parameter -->
            <div id="install-no-shop" style="display: none;">
                <div style="background: #f4f6f8; border-radius: 12px; padding: 24px; text-align: center;">
                    <h3 style="color: #212b36; margin-bottom: 16px; font-size: 18px;">üì¶ Install from Shopify App Store</h3>
                    <p style="color: #637381; margin-bottom: 16px; line-height: 1.6;">
                        Sherlock is installed directly through Shopify to ensure a secure connection to your store.
                    </p>
                    <p style="color: #637381; margin-bottom: 16px; line-height: 1.6;">
                        Search for <strong>"Sherlock"</strong> in the Shopify App Store to install.
                    </p>
                    <p style="color: #637381; font-size: 14px; border-top: 1px solid #dfe3e8; padding-top: 16px; margin-top: 16px;">
                        üîí All installs go through Shopify's secure OAuth process.
                    </p>
                </div>
            </div>

            <div class="install-features">
                <h3>Why Every Store Needs Sherlock</h3>
                <div class="feature-item">
                    <span class="feature-icon" aria-hidden="true">üõ°Ô∏è</span>
                    <span class="feature-text"><strong>Protection That Never Sleeps</strong> - Catches conflicts before
                        your
                        customers notice</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon" aria-hidden="true">üîç</span>
                    <span class="feature-text"><strong>X-Ray Vision</strong> - Finds hidden code, scripts, and conflicts
                        other tools
                        miss</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon" aria-hidden="true">‚ö°</span>
                    <span class="feature-text"><strong>Speed Detective</strong> - Know exactly what's slowing you down
                        before it
                        hurts sales</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon" aria-hidden="true">üîÑ</span>
                    <span class="feature-text"><strong>Instant Undo</strong> - One click to restore your theme if
                        anything ever
                        breaks</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon" aria-hidden="true">üí¨</span>
                    <span class="feature-text"><strong>Plain English</strong> - Clear explanations and fixes you can
                        actually
                        follow</span>
                </div>
            </div>

            <div class="trust-badges">
                <div class="trust-badge">
                    <span>‚úî</span>
                    <span>14-day Free Trial</span>
                </div>
                <div class="trust-badge">
                    <span>‚úî</span>
                    <span>No code changes</span>
                </div>
                <div class="trust-badge">
                    <span>‚úî</span>
                    <span>Instant results</span>
                </div>
            </div>

            <div class="install-footer">
                <p>Already installed? <a href="/dashboard"
                        onclick="event.preventDefault(); window.location.href='/dashboard?shop=' + new URLSearchParams(window.location.search).get('shop');">Go
                        to Dashboard</a></p>
            </div>
        </div>
    </div>

    <script>
        // Check installation status and handle OAuth flow
        (async function handleInstall() {
            const params = new URLSearchParams(window.location.search);
            const shop = params.get('shop');
            const host = params.get('host');

            if (shop) {
                // Shop parameter present - check if already installed
                try {
                    const response = await fetch('/api/v1/auth/verify?shop=' + encodeURIComponent(shop));
                    const data = await response.json();

                    if (data.installed) {
                        // Already installed - redirect to dashboard
                        let redirectUrl = '/dashboard?shop=' + encodeURIComponent(shop);
                        if (host) {
                            redirectUrl += '&host=' + encodeURIComponent(host);
                        }
                        console.log('‚úÖ Already installed, redirecting to dashboard');
                        window.location.href = redirectUrl;
                        return;
                    }
                } catch (error) {
                    console.log('Could not verify installation:', error);
                }

                // Not installed - show redirecting message and auto-start OAuth
                document.getElementById('install-with-shop').style.display = 'block';
                document.getElementById('install-no-shop').style.display = 'none';

                // Normalize shop domain
                let normalizedShop = shop;
                if (!normalizedShop.includes('.myshopify.com')) {
                    normalizedShop = normalizedShop + '.myshopify.com';
                }

                // Auto-start OAuth after brief delay (so user sees the message)
                setTimeout(function () {
                    console.log('üîê Starting OAuth flow for ' + normalizedShop);
                    window.location.href = '/auth/shopify?shop=' + encodeURIComponent(normalizedShop);
                }, 800);

            } else {
                // No shop parameter - show instructions
                document.getElementById('install-with-shop').style.display = 'none';
                document.getElementById('install-no-shop').style.display = 'block';
            }
        })();
    </script>
</body>

</html>